/***********************************************************************************************************************
Copyright:  
FileName: SndBuf.cpp 
Author:        Version :          Date:   
Description:    
Version:         
Function List:    
History:               
<author>   <time>   <version >   <desc>       
 ------    14/25/8   1.0.0.0     build this file 
************************************************************************************************************************/
#include "SndBuf.h"

/***********************************************************************************************************************
Function:CSndBuf
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
CSndBuf::CSndBuf()
{
	m_pStart  = NULL;// new S8[Size];
	m_pWrPos  = NULL;//m_pStart;
	m_pRdPos  = NULL;//m_pStart;
	m_BufSize = 0;   //Size;
	m_DataLen = 0;
}

/***********************************************************************************************************************
Function:~CSndBuf
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
CSndBuf::~CSndBuf()
{
	if (m_pStart)
	{
		delete m_pStart;
	}
}

/***********************************************************************************************************************
Function:CSndBuf
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
S32 CSndBuf::Init(S32 Size)
{
	m_pStart  = new S8[Size];
	m_pWrPos  = m_pStart;
	m_pRdPos  = m_pStart;
	m_BufSize = Size;
	m_DataLen = 0;
	
	return MW_SUCC;
}

/***********************************************************************************************************************
Function:CSndBuf
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
Void CSndBuf::Clear()
{
	m_pWrPos  = m_pStart;
	m_pRdPos  = m_pStart;
	m_DataLen = 0;
}

/***********************************************************************************************************************
 Function:GetWrPos
 Description:   
 Called By:    
 Input:          
 Output:          
 Return:       
 Others:        
 ************************************************************************************************************************/
S8* CSndBuf::GetWrPos()
{
	if (m_DataLen > 0)
	{
		return NULL;	
	} 

	return m_pWrPos;
}

/***********************************************************************************************************************
Function:GetRdPos
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
S8* CSndBuf::GetRdPos()
{
	if (m_DataLen <= 0)
	{
		return NULL;
	}
	return m_pRdPos;
}

/***********************************************************************************************************************
Function:FreeLen
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
S32 CSndBuf::FreeLen()
{
	return m_BufSize;
}

/***********************************************************************************************************************
Function:DataLen
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
S32 CSndBuf::DataLen()
{
	return m_DataLen;
}

/***********************************************************************************************************************
Function:IncLen
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
S32 CSndBuf::IncLen(S32 Len)
{
	m_DataLen = Len;
	m_pRdPos  = m_pWrPos;
	return m_DataLen;
}

/***********************************************************************************************************************
Function:DecLen
Description:   
Called By:    
Input:          
Output:          
Return:       
Others:        
************************************************************************************************************************/
S32 CSndBuf::DecLen(S32 Len)
{
	m_DataLen -= Len;
	m_pRdPos  += Len;
	return m_DataLen;
}
